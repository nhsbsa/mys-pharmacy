!function(){var o=window.CustomEvent;function a(e){for(;e;){if("DIALOG"==e.nodeName.toUpperCase())return e;e=e.parentElement}return null}function i(e){e&&e.blur&&e!=document.body&&e.blur()}function t(e){this.dialog_=e,this.replacedStyleTop_=!1,this.openAsModal_=!1,e.hasAttribute("role")||e.setAttribute("role","dialog"),e.show=this.show.bind(this),e.showModal=this.showModal.bind(this),e.close=this.close.bind(this),"returnValue"in e||(e.returnValue=""),this.maybeHideModal=this.maybeHideModal.bind(this),"MutationObserver"in window?new MutationObserver(this.maybeHideModal).observe(e,{attributes:!0,attributeFilter:["open"]}):e.addEventListener("DOMAttrModified",this.maybeHideModal),Object.defineProperty(e,"open",{set:this.setOpen.bind(this),get:e.hasAttribute.bind(e,"open")}),this.backdrop_=document.createElement("div"),this.backdrop_.className="backdrop",this.backdropClick_=this.backdropClick_.bind(this)}o&&"object"!=typeof o||((o=function(e,t){t=t||{};var o=document.createEvent("CustomEvent");return o.initCustomEvent(e,!!t.bubbles,!!t.cancelable,t.detail||null),o}).prototype=window.Event.prototype),t.prototype={get dialog(){return this.dialog_},maybeHideModal:function(){!this.openAsModal_||this.dialog_.hasAttribute("open")&&document.body.contains(this.dialog_)||(this.openAsModal_=!1,this.dialog_.style.zIndex="",this.replacedStyleTop_&&(this.dialog_.style.top="",this.replacedStyleTop_=!1),this.backdrop_.removeEventListener("click",this.backdropClick_),this.backdrop_.parentElement&&this.backdrop_.parentElement.removeChild(this.backdrop_),n.dm.removeDialog(this))},setOpen:function(e){e?this.dialog_.hasAttribute("open")||this.dialog_.setAttribute("open",""):(this.dialog_.removeAttribute("open"),this.maybeHideModal())},backdropClick_:function(e){var t=document.createEvent("MouseEvents");t.initMouseEvent(e.type,e.bubbles,e.cancelable,window,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),this.dialog_.dispatchEvent(t),e.stopPropagation()},focus_:function(){var e,t=this.dialog_.querySelector("[autofocus]:not([disabled])");t||((e=["button","input","keygen","select","textarea"].map(function(e){return e+":not([disabled])"})).push('[tabindex]:not([disabled]):not([tabindex=""])'),t=this.dialog_.querySelector(e.join(", "))),i(document.activeElement),t&&t.focus()},updateZIndex:function(e,t){this.backdrop_.style.zIndex=e,this.dialog_.style.zIndex=t},show:function(){this.dialog_.open||(this.setOpen(!0),this.focus_())},showModal:function(){if(this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'showModal' on dialog: The element is already open, and therefore cannot be opened modally.");if(!document.body.contains(this.dialog_))throw new Error("Failed to execute 'showModal' on dialog: The element is not in a Document.");if(!n.dm.pushDialog(this))throw new Error("Failed to execute 'showModal' on dialog: There are too many open modal dialogs.");this.show(),this.openAsModal_=!0,n.needsCentering(this.dialog_)?(n.reposition(this.dialog_),this.replacedStyleTop_=!0):this.replacedStyleTop_=!1,this.backdrop_.addEventListener("click",this.backdropClick_),this.dialog_.parentNode.insertBefore(this.backdrop_,this.dialog_.nextSibling)},close:function(e){if(!this.dialog_.hasAttribute("open"))throw new Error("Failed to execute 'close' on dialog: The element does not have an 'open' attribute, and therefore cannot be closed.");this.setOpen(!1),void 0!==e&&(this.dialog_.returnValue=e);e=new o("close",{bubbles:!1,cancelable:!1});this.dialog_.dispatchEvent(e)}};var n={reposition:function(e){var t=document.body.scrollTop||document.documentElement.scrollTop,o=t+(window.innerHeight-e.offsetHeight)/2;e.style.top=Math.max(t,o)+"px"}};n.isInlinePositionSetByStylesheet=function(e){for(var t=0;t<document.styleSheets.length;++t){var o=document.styleSheets[t],i=null;try{i=o.cssRules}catch(e){}if(i)for(var n=0;n<i.length;++n){var a=i[n],l=null;try{l=document.querySelectorAll(a.selectorText)}catch(e){}if(l&&function(e,t){for(var o=0;o<e.length;++o)if(e[o]==t)return 1}(l,e)){l=a.style.getPropertyValue("top"),a=a.style.getPropertyValue("bottom");if(l&&"auto"!=l||a&&"auto"!=a)return!0}}}return!1},n.needsCentering=function(e){return"absolute"==window.getComputedStyle(e).position&&!("auto"!=e.style.top&&""!=e.style.top||"auto"!=e.style.bottom&&""!=e.style.bottom||n.isInlinePositionSetByStylesheet(e))},n.forceRegisterDialog=function(e){if(e.showModal&&console.warn("This browser already supports <dialog>, the polyfill may not work correctly",e),"DIALOG"!=e.nodeName.toUpperCase())throw new Error("Failed to register dialog: The element is not a dialog.");new t(e)},n.registerDialog=function(e){e.showModal?console.warn("Can't upgrade <dialog>: already supported",e):n.forceRegisterDialog(e)},n.DialogManager=function(){this.pendingDialogStack=[],this.overlay=document.createElement("div"),this.overlay.className="_dialog_overlay",this.overlay.addEventListener("click",function(e){e.stopPropagation()}),this.handleKey_=this.handleKey_.bind(this),this.handleFocus_=this.handleFocus_.bind(this),this.handleRemove_=this.handleRemove_.bind(this),this.zIndexLow_=1e5,this.zIndexHigh_=100150},n.DialogManager.prototype.topDialogElement=function(){return this.pendingDialogStack.length?this.pendingDialogStack[this.pendingDialogStack.length-1].dialog:null},n.DialogManager.prototype.blockDocument=function(){document.body.appendChild(this.overlay),document.body.addEventListener("focus",this.handleFocus_,!0),document.addEventListener("keydown",this.handleKey_),document.addEventListener("DOMNodeRemoved",this.handleRemove_)},n.DialogManager.prototype.unblockDocument=function(){document.body.removeChild(this.overlay),document.body.removeEventListener("focus",this.handleFocus_,!0),document.removeEventListener("keydown",this.handleKey_),document.removeEventListener("DOMNodeRemoved",this.handleRemove_)},n.DialogManager.prototype.updateStacking=function(){for(var e=this.zIndexLow_,t=0;t<this.pendingDialogStack.length;t++)t==this.pendingDialogStack.length-1&&(this.overlay.style.zIndex=e++),this.pendingDialogStack[t].updateZIndex(e++,e++)},n.DialogManager.prototype.handleFocus_=function(e){if(a(e.target)!=this.topDialogElement())return e.preventDefault(),e.stopPropagation(),i(e.target),!1},n.DialogManager.prototype.handleKey_=function(e){var t;27==e.keyCode&&(e.preventDefault(),e.stopPropagation(),e=new o("cancel",{bubbles:!1,cancelable:!0}),(t=this.topDialogElement()).dispatchEvent(e))&&t.close()},n.DialogManager.prototype.handleRemove_=function(e){var t;"DIALOG"==e.target.nodeName.toUpperCase()&&(t=e.target).open&&this.pendingDialogStack.some(function(e){if(e.dialog==t)return e.maybeHideModal(),!0})},n.DialogManager.prototype.pushDialog=function(e){var t=(this.zIndexHigh_-this.zIndexLow_)/2-1;return!(this.pendingDialogStack.length>=t||(this.pendingDialogStack.push(e),1==this.pendingDialogStack.length&&this.blockDocument(),this.updateStacking(),0))},n.DialogManager.prototype.removeDialog=function(e){e=this.pendingDialogStack.indexOf(e);-1!=e&&(this.pendingDialogStack.splice(e,1),this.updateStacking(),0==this.pendingDialogStack.length)&&this.unblockDocument()},n.dm=new n.DialogManager,document.addEventListener("submit",function(t){var o,e,i,n=t.target;n&&n.hasAttribute("method")&&"dialog"==n.getAttribute("method").toLowerCase()&&(t.preventDefault(),n=a(t.target))&&(e=[document.activeElement,t.explicitOriginalTarget],i=["BUTTON","INPUT"],e.some(function(e){if(e&&e.form==t.target&&-1!=i.indexOf(e.nodeName.toUpperCase()))return o=e.value,!0}),n.close(o))},!0),n.forceRegisterDialog=n.forceRegisterDialog,n.registerDialog=n.registerDialog,"object"==typeof module&&"object"==typeof module.exports?module.exports=n:"function"==typeof define&&"amd"in define?define(function(){return n}):window.dialogPolyfill=n}();
!function(e){"use strict";const u={};document.getElementById("js-modal-dialog")&&(u.sessionDialog={el:document.getElementById("js-modal-dialog"),$lastFocusedEl:null,$closeButton:document.querySelector(".modal-dialog .js-dialog-close"),dialogIsOpenClass:"dialog-is-open",timers:[],warningTextPrefix:document.querySelector("#js-modal-dialog")?.dataset.sessionTimeoutTimerText+" "||"We will reset your application if you do not respond in ",warningTextSuffix:".",warningTextExtra:" "+document.querySelector("#js-modal-dialog")?.dataset.sessionTimeoutTimerExtraText||" We do this to keep your information secure.",$timer:document.querySelector("#js-modal-dialog .timer"),$accessibleTimer:document.querySelector("#js-modal-dialog .at-timer"),secondsSessionTimeout:parseInt(document.querySelector("#js-modal-dialog").dataset.sessionTimeout||1800),secondsTimeoutWarning:parseInt(document.querySelector("#js-modal-dialog").dataset.sessionTimeoutWarning||300),secondsFinalWarning:parseInt(document.querySelector("#js-modal-dialog").dataset.sessionTimeoutFinalWarning||4),timeoutRedirectUrl:document.querySelector("#js-modal-dialog").dataset.urlRedirect,timerText:document.querySelector("#js-modal-dialog").dataset.sessionTimeoutTimerText,accessibleTimerText:document.querySelector("#js-modal-dialog").dataset.sessionTimeoutTimerAccessibleText,timeSessionRefreshed:new Date,bindUIElements:function(){u.sessionDialog.$closeButton.addEventListener("click",e=>{e.preventDefault(),u.sessionDialog.closeDialog()}),document.addEventListener("keydown",e=>{u.sessionDialog.isDialogOpen()&&"Escape"===e.key&&u.sessionDialog.closeDialog()})},isDialogOpen:function(){return u.sessionDialog.el.open},isConfigured:function(){var{}=u.sessionDialog;return u.sessionDialog.$timer&&u.sessionDialog.$accessibleTimer&&u.sessionDialog.secondsSessionTimeout&&u.sessionDialog.secondsTimeoutWarning&&u.sessionDialog.timeoutRedirectUrl},openDialog:function(){u.sessionDialog.isDialogOpen()||(document.body.classList.add(u.sessionDialog.dialogIsOpenClass),u.sessionDialog.saveLastFocusedEl(),u.sessionDialog.makePageContentInert(),u.sessionDialog.el.showModal())},closeDialog:function(){u.sessionDialog.isDialogOpen()&&(document.body.classList.remove(u.sessionDialog.dialogIsOpenClass),u.sessionDialog.el.close(),u.sessionDialog.setFocusOnLastFocusedEl(),u.sessionDialog.removeInertFromPageContent(),u.sessionDialog.refreshSession())},saveLastFocusedEl:function(){u.sessionDialog.$lastFocusedEl=document.activeElement,u.sessionDialog.$lastFocusedEl&&u.sessionDialog.$lastFocusedEl!==document.body?document.querySelector&&(u.sessionDialog.$lastFocusedEl=document.querySelector(":focus")):u.sessionDialog.$lastFocusedEl=null},setFocusOnLastFocusedEl:function(){u.sessionDialog.$lastFocusedEl&&window.setTimeout(function(){u.sessionDialog.$lastFocusedEl.focus()},0)},makePageContentInert:function(){document.querySelector("#content")&&(document.querySelector("#content").inert=!0,document.querySelector("#content").setAttribute("aria-hidden","true"))},removeInertFromPageContent:function(){document.querySelector("#content")&&(document.querySelector("#content").inert=!1,document.querySelector("#content").setAttribute("aria-hidden","false"))},numberToWords:function(e){var s,o,i,n,t,l,a,r,u,c,d=e.toString(),g="and";if(0===parseInt(d))return"zero";for(s=["","one","two","three","four","five","six","seven","eight","nine","ten","eleven","twelve","thirteen","fourteen","fifteen","sixteen","seventeen","eighteen","nineteen"],o=["","","twenty","thirty","forty","fifty","sixty","seventy","eighty","ninety"],i=["","thousand","million","billion","trillion","quadrillion","quintillion","sextillion","septillion","octillion","nonillion","decillion","undecillion","duodecillion","tredecillion","quatttuor-decillion","quindecillion","sexdecillion","septen-decillion","octodecillion","novemdecillion","vigintillion","centillion"],n=d.length,l=[];0<n;)t=n,l.push(d.slice(n=Math.max(0,n-3),t));if(i.length<(a=l.length))return"";for(g=[],u=0;u<a;u++)parseInt(l[u])&&(1===(r=l[u].split("").reverse().map(parseFloat))[1]&&(r[0]+=10),(c=i[u])&&g.push(c),(c=s[r[0]])&&g.push(c),(c=o[r[1]])&&g.push(c),c=s[r[2]])&&g.push(c+" hundred");return g.reverse().join(" ")},timeToWords:function(s,e){var o;if(0<s){try{o=u.sessionDialog.numberToWords(s)}catch(e){o=s}o=o+" "+u.sessionDialog.pluralise(s,e)}else o="";return o},pluralise:function(e,s){return 1==e?s:s+"s"},numericSpan:function(e,s){return'<span class="tabular-numbers">'+e+"</span> "+u.sessionDialog.pluralise(e,s)},countdownText:function(e,s){var o=u.sessionDialog.numericSpan(e,"minute"),i=u.sessionDialog.numericSpan(s,"second");return 0<e?o+(1==e&&0==s?"":" "+i):i},countdownAtText:function(e,s){var o=u.sessionDialog.timeToWords(e,"minute"),i=u.sessionDialog.timeToWords(s,"second");return 0<e?o+(0<s?" and "+i:""):i},startCountdown:function(){var t=u.sessionDialog.$timer,l=u.sessionDialog.$accessibleTimer,a=!1,r=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,e=u.sessionDialog.secondsUntilSessionTimeout()/60;t.text=e+" minute"+(1<e?"s":""),function e(){var s,o,i,n=u.sessionDialog.secondsUntilSessionTimeout();n<=u.sessionDialog.secondsFinalWarning||(o=parseInt(n/60,10),n=parseInt(n%60,10),u.sessionDialog.timeToWords(o,"minute"),u.sessionDialog.timeToWords(n,"second"),s=u.sessionDialog.countdownText(o,n),s=u.sessionDialog.warningTextPrefix+"<strong>"+s+"</strong>"+u.sessionDialog.warningTextSuffix,o=u.sessionDialog.countdownAtText(o,n),o=u.sessionDialog.warningTextPrefix+o+u.sessionDialog.warningTextSuffix,i=" "+u.sessionDialog.warningTextExtra,t.innerHTML=s+" "+i,n%15==0&&(a||r?l.textContent=o:(l.textContent=o+i,a=!0)),u.sessionDialog.addTimer(e,1))}()},finalWarning:function(){var e=u.sessionDialog.$timer,s=u.sessionDialog.$accessibleTimer;s.setAttribute("aria-live","assertive"),e.textContent="You are about to be redirected",s.textContent="You are about to be redirected"},clearTimers:function(){for(var e=0;e<u.sessionDialog.timers.length;e++)clearTimeout(u.sessionDialog.timers[e])},request:function(){var e=new XMLHttpRequest;e.open("GET","",!0),e.responseType="text",e.send(null)},refreshSession:function(){this.request(),u.sessionDialog.timeSessionRefreshed=new Date,u.sessionDialog.controller()},redirect:function(){u.sessionDialog.clearTimers(),window.location=u.sessionDialog.timeoutRedirectUrl},addTimer:function(e,s){u.sessionDialog.timers.push(setTimeout(e,1e3*s))},secondsSinceRefresh:function(){return Math.round(Math.abs((u.sessionDialog.timeSessionRefreshed-new Date)/1e3))},secondsUntilSessionTimeout:function(){return u.sessionDialog.secondsSessionTimeout-u.sessionDialog.secondsSinceRefresh()},secondsUntilTimeoutWarning:function(){return u.sessionDialog.secondsUntilSessionTimeout()-u.sessionDialog.secondsTimeoutWarning},secondsUntilFinalWarning:function(){return u.sessionDialog.secondsUntilSessionTimeout()-u.sessionDialog.secondsFinalWarning},controller:function(){u.sessionDialog.clearTimers();var e=u.sessionDialog.secondsUntilSessionTimeout();if(e<=0)return u.sessionDialog.redirect();e<=u.sessionDialog.secondsFinalWarning?(u.sessionDialog.openDialog(),u.sessionDialog.finalWarning(),u.sessionDialog.addTimer(u.sessionDialog.controller,u.sessionDialog.secondsUntilSessionTimeout())):e<=u.sessionDialog.secondsTimeoutWarning?(u.sessionDialog.openDialog(),u.sessionDialog.startCountdown(),u.sessionDialog.addTimer(u.sessionDialog.controller,u.sessionDialog.secondsUntilFinalWarning())):u.sessionDialog.addTimer(u.sessionDialog.controller,u.sessionDialog.secondsUntilTimeoutWarning())},init:function(e){u.sessionDialog={...u.sessionDialog,...e},u.sessionDialog.el&&u.sessionDialog.isConfigured()&&("function"!=typeof HTMLDialogElement&&window.dialogPolyfill.registerDialog(u.sessionDialog.el),u.sessionDialog.bindUIElements(),u.sessionDialog.controller())}}),e.NHSBSASessionTimeout=u}(window);
function ready(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}NHSBSASessionTimeout?.sessionDialog&&ready(NHSBSASessionTimeout.sessionDialog.init);